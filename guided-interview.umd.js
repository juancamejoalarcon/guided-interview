(function(I,C){typeof exports=="object"&&typeof module<"u"?C(exports):typeof define=="function"&&define.amd?define(["exports"],C):(I=typeof globalThis<"u"?globalThis:I||self,C(I["Guided Interview"]={}))})(this,function(I){"use strict";var jt=Object.defineProperty;var Dt=(I,C,R)=>C in I?jt(I,C,{enumerable:!0,configurable:!0,writable:!0,value:R}):I[C]=R;var d=(I,C,R)=>(Dt(I,typeof C!="symbol"?C+"":C,R),R);const C={nullOrUndefined:"Interview params are null or undefined"};class R extends Error{constructor(t,e=""){super(t),this.name="ValidationError",this.message=e||C[t]}}var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function me(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),e}var U={},q={},se={},$={},N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default=be;let B;const ye=new Uint8Array(16);function be(){if(!B&&(B=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(ye)}var L={},A={},k={};Object.defineProperty(k,"__esModule",{value:!0}),k.default=void 0;var Ce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;k.default=Ce,Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var Ie=Oe(k);function Oe(i){return i&&i.__esModule?i:{default:i}}function Re(i){return typeof i=="string"&&Ie.default.test(i)}var Le=Re;A.default=Le,Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0,L.unsafeStringify=ue;var Pe=Se(A);function Se(i){return i&&i.__esModule?i:{default:i}}const p=[];for(let i=0;i<256;++i)p.push((i+256).toString(16).slice(1));function ue(i,t=0){return(p[i[t+0]]+p[i[t+1]]+p[i[t+2]]+p[i[t+3]]+"-"+p[i[t+4]]+p[i[t+5]]+"-"+p[i[t+6]]+p[i[t+7]]+"-"+p[i[t+8]]+p[i[t+9]]+"-"+p[i[t+10]]+p[i[t+11]]+p[i[t+12]]+p[i[t+13]]+p[i[t+14]]+p[i[t+15]]).toLowerCase()}function Ae(i,t=0){const e=ue(i,t);if(!(0,Pe.default)(e))throw TypeError("Stringified UUID is invalid");return e}var xe=Ae;L.default=xe,Object.defineProperty($,"__esModule",{value:!0}),$.default=void 0;var Ee=Me(N),Qe=L;function Me(i){return i&&i.__esModule?i:{default:i}}let ae,X,ee=0,te=0;function Ue(i,t,e){let n=t&&e||0;const r=t||new Array(16);i=i||{};let s=i.node||ae,u=i.clockseq!==void 0?i.clockseq:X;if(s==null||u==null){const v=i.random||(i.rng||Ee.default)();s==null&&(s=ae=[v[0]|1,v[1],v[2],v[3],v[4],v[5]]),u==null&&(u=X=(v[6]<<8|v[7])&16383)}let a=i.msecs!==void 0?i.msecs:Date.now(),o=i.nsecs!==void 0?i.nsecs:te+1;const f=a-ee+(o-te)/1e4;if(f<0&&i.clockseq===void 0&&(u=u+1&16383),(f<0||a>ee)&&i.nsecs===void 0&&(o=0),o>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ee=a,te=o,X=u,a+=122192928e5;const l=((a&268435455)*1e4+o)%4294967296;r[n++]=l>>>24&255,r[n++]=l>>>16&255,r[n++]=l>>>8&255,r[n++]=l&255;const h=a/4294967296*1e4&268435455;r[n++]=h>>>8&255,r[n++]=h&255,r[n++]=h>>>24&15|16,r[n++]=h>>>16&255,r[n++]=u>>>8|128,r[n++]=u&255;for(let v=0;v<6;++v)r[n+v]=s[v];return t||(0,Qe.unsafeStringify)(r)}var qe=Ue;$.default=qe;var T={},P={},E={};Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var $e=Ne(A);function Ne(i){return i&&i.__esModule?i:{default:i}}function Be(i){if(!(0,$e.default)(i))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var ke=Be;E.default=ke,Object.defineProperty(P,"__esModule",{value:!0}),P.URL=P.DNS=void 0,P.default=Ve;var Te=L,je=De(E);function De(i){return i&&i.__esModule?i:{default:i}}function Fe(i){i=unescape(encodeURIComponent(i));const t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}const oe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";P.DNS=oe;const le="6ba7b811-9dad-11d1-80b4-00c04fd430c8";P.URL=le;function Ve(i,t,e){function n(r,s,u,a){var o;if(typeof r=="string"&&(r=Fe(r)),typeof s=="string"&&(s=(0,je.default)(s)),((o=s)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+r.length);if(f.set(s),f.set(r,s.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,u){a=a||0;for(let l=0;l<16;++l)u[a+l]=f[l];return u}return(0,Te.unsafeStringify)(f)}try{n.name=i}catch{}return n.DNS=oe,n.URL=le,n}var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=void 0;function We(i){if(typeof i=="string"){const t=unescape(encodeURIComponent(i));i=new Uint8Array(t.length);for(let e=0;e<t.length;++e)i[e]=t.charCodeAt(e)}return Ge(He(ze(i),i.length*8))}function Ge(i){const t=[],e=i.length*32,n="0123456789abcdef";for(let r=0;r<e;r+=8){const s=i[r>>5]>>>r%32&255,u=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(u)}return t}function ce(i){return(i+64>>>9<<4)+14+1}function He(i,t){i[t>>5]|=128<<t%32,i[ce(t)-1]=t;let e=1732584193,n=-271733879,r=-1732584194,s=271733878;for(let u=0;u<i.length;u+=16){const a=e,o=n,f=r,l=s;e=_(e,n,r,s,i[u],7,-680876936),s=_(s,e,n,r,i[u+1],12,-389564586),r=_(r,s,e,n,i[u+2],17,606105819),n=_(n,r,s,e,i[u+3],22,-1044525330),e=_(e,n,r,s,i[u+4],7,-176418897),s=_(s,e,n,r,i[u+5],12,1200080426),r=_(r,s,e,n,i[u+6],17,-1473231341),n=_(n,r,s,e,i[u+7],22,-45705983),e=_(e,n,r,s,i[u+8],7,1770035416),s=_(s,e,n,r,i[u+9],12,-1958414417),r=_(r,s,e,n,i[u+10],17,-42063),n=_(n,r,s,e,i[u+11],22,-1990404162),e=_(e,n,r,s,i[u+12],7,1804603682),s=_(s,e,n,r,i[u+13],12,-40341101),r=_(r,s,e,n,i[u+14],17,-1502002290),n=_(n,r,s,e,i[u+15],22,1236535329),e=m(e,n,r,s,i[u+1],5,-165796510),s=m(s,e,n,r,i[u+6],9,-1069501632),r=m(r,s,e,n,i[u+11],14,643717713),n=m(n,r,s,e,i[u],20,-373897302),e=m(e,n,r,s,i[u+5],5,-701558691),s=m(s,e,n,r,i[u+10],9,38016083),r=m(r,s,e,n,i[u+15],14,-660478335),n=m(n,r,s,e,i[u+4],20,-405537848),e=m(e,n,r,s,i[u+9],5,568446438),s=m(s,e,n,r,i[u+14],9,-1019803690),r=m(r,s,e,n,i[u+3],14,-187363961),n=m(n,r,s,e,i[u+8],20,1163531501),e=m(e,n,r,s,i[u+13],5,-1444681467),s=m(s,e,n,r,i[u+2],9,-51403784),r=m(r,s,e,n,i[u+7],14,1735328473),n=m(n,r,s,e,i[u+12],20,-1926607734),e=y(e,n,r,s,i[u+5],4,-378558),s=y(s,e,n,r,i[u+8],11,-2022574463),r=y(r,s,e,n,i[u+11],16,1839030562),n=y(n,r,s,e,i[u+14],23,-35309556),e=y(e,n,r,s,i[u+1],4,-1530992060),s=y(s,e,n,r,i[u+4],11,1272893353),r=y(r,s,e,n,i[u+7],16,-155497632),n=y(n,r,s,e,i[u+10],23,-1094730640),e=y(e,n,r,s,i[u+13],4,681279174),s=y(s,e,n,r,i[u],11,-358537222),r=y(r,s,e,n,i[u+3],16,-722521979),n=y(n,r,s,e,i[u+6],23,76029189),e=y(e,n,r,s,i[u+9],4,-640364487),s=y(s,e,n,r,i[u+12],11,-421815835),r=y(r,s,e,n,i[u+15],16,530742520),n=y(n,r,s,e,i[u+2],23,-995338651),e=b(e,n,r,s,i[u],6,-198630844),s=b(s,e,n,r,i[u+7],10,1126891415),r=b(r,s,e,n,i[u+14],15,-1416354905),n=b(n,r,s,e,i[u+5],21,-57434055),e=b(e,n,r,s,i[u+12],6,1700485571),s=b(s,e,n,r,i[u+3],10,-1894986606),r=b(r,s,e,n,i[u+10],15,-1051523),n=b(n,r,s,e,i[u+1],21,-2054922799),e=b(e,n,r,s,i[u+8],6,1873313359),s=b(s,e,n,r,i[u+15],10,-30611744),r=b(r,s,e,n,i[u+6],15,-1560198380),n=b(n,r,s,e,i[u+13],21,1309151649),e=b(e,n,r,s,i[u+4],6,-145523070),s=b(s,e,n,r,i[u+11],10,-1120210379),r=b(r,s,e,n,i[u+2],15,718787259),n=b(n,r,s,e,i[u+9],21,-343485551),e=S(e,a),n=S(n,o),r=S(r,f),s=S(s,l)}return[e,n,r,s]}function ze(i){if(i.length===0)return[];const t=i.length*8,e=new Uint32Array(ce(t));for(let n=0;n<t;n+=8)e[n>>5]|=(i[n/8]&255)<<n%32;return e}function S(i,t){const e=(i&65535)+(t&65535);return(i>>16)+(t>>16)+(e>>16)<<16|e&65535}function Ze(i,t){return i<<t|i>>>32-t}function D(i,t,e,n,r,s){return S(Ze(S(S(t,i),S(n,s)),r),e)}function _(i,t,e,n,r,s,u){return D(t&e|~t&n,i,t,r,s,u)}function m(i,t,e,n,r,s,u){return D(t&n|e&~n,i,t,r,s,u)}function y(i,t,e,n,r,s,u){return D(t^e^n,i,t,r,s,u)}function b(i,t,e,n,r,s,u){return D(e^(t|~n),i,t,r,s,u)}var Ye=We;j.default=Ye,Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var Je=he(P),Ke=he(j);function he(i){return i&&i.__esModule?i:{default:i}}var Xe=(0,Je.default)("v3",48,Ke.default);T.default=Xe;var F={},V={};Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var et={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};V.default=et,Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var fe=de(V),tt=de(N),it=L;function de(i){return i&&i.__esModule?i:{default:i}}function nt(i,t,e){if(fe.default.randomUUID&&!t&&!i)return fe.default.randomUUID();i=i||{};const n=i.random||(i.rng||tt.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return(0,it.unsafeStringify)(n)}var rt=nt;F.default=rt;var W={},G={};Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;function st(i,t,e,n){switch(i){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function ie(i,t){return i<<t|i>>>32-t}function ut(i){const t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const u=unescape(encodeURIComponent(i));i=[];for(let a=0;a<u.length;++a)i.push(u.charCodeAt(a))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const n=i.length/4+2,r=Math.ceil(n/16),s=new Array(r);for(let u=0;u<r;++u){const a=new Uint32Array(16);for(let o=0;o<16;++o)a[o]=i[u*64+o*4]<<24|i[u*64+o*4+1]<<16|i[u*64+o*4+2]<<8|i[u*64+o*4+3];s[u]=a}s[r-1][14]=(i.length-1)*8/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),s[r-1][15]=(i.length-1)*8&4294967295;for(let u=0;u<r;++u){const a=new Uint32Array(80);for(let g=0;g<16;++g)a[g]=s[u][g];for(let g=16;g<80;++g)a[g]=ie(a[g-3]^a[g-8]^a[g-14]^a[g-16],1);let o=e[0],f=e[1],l=e[2],h=e[3],v=e[4];for(let g=0;g<80;++g){const x=Math.floor(g/20),w=ie(o,5)+st(x,f,l,h)+v+t[x]+a[g]>>>0;v=h,h=l,l=ie(f,30)>>>0,f=o,o=w}e[0]=e[0]+o>>>0,e[1]=e[1]+f>>>0,e[2]=e[2]+l>>>0,e[3]=e[3]+h>>>0,e[4]=e[4]+v>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var at=ut;G.default=at,Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var ot=ve(P),lt=ve(G);function ve(i){return i&&i.__esModule?i:{default:i}}var ct=(0,ot.default)("v5",80,lt.default);W.default=ct;var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var ht="00000000-0000-0000-0000-000000000000";H.default=ht;var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var ft=dt(A);function dt(i){return i&&i.__esModule?i:{default:i}}function vt(i){if(!(0,ft.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var gt=vt;z.default=gt,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(i,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return u.default}});var t=l($),e=l(T),n=l(F),r=l(W),s=l(H),u=l(z),a=l(A),o=l(L),f=l(E);function l(h){return h&&h.__esModule?h:{default:h}}}(se);var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.RandomStringConfig=void 0;class pt{constructor(){this.config={length:21,numbers:!1,symbols:!1,characters:!1}}length(){return this.config.length}withLength(t){return t&&(this.config.length=t),this}useCharacters(){return this.config.characters=!0,this}shouldUseCharacters(){return this.config.characters}useNumbers(){return this.config.numbers=!0,this}shouldUseNumbers(){return this.config.numbers}useSymbols(){return this.config.symbols=!0,this}shouldUseSymbols(){return this.config.symbols}}Z.RandomStringConfig=pt;var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.RandomStringBuilder=void 0;class wt{constructor(t){this.config=t}length(t){return this.config.withLength(t),this}characters(){return this.config.useCharacters(),this}numbers(){return this.config.useNumbers(),this}symbols(){return this.config.useSymbols(),this}}Y.RandomStringBuilder=wt;var J={};const _t=new Proxy({},{get(i,t){throw new Error(`Module "crypto" has been externalized for browser compatibility. Cannot access "crypto.${t}" in client code.  See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),mt=me(Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"})));var yt=re&&re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(J,"__esModule",{value:!0}),J.RandomStringGenerator=void 0;const bt=yt(mt);class Ct{constructor(t,e){this.Str=t,this.config=e}characters(){return"ModuleSymbhasOwnPrABCDEFGHNRVfgctiUvzKqYTJkLxpZXIjQW"}numbers(){return"0123456789"}symbols(){return"-_"}alphabet(){let t="";return this.config.shouldUseCharacters()&&(t+=this.characters()),this.config.shouldUseNumbers()&&(t+=this.numbers()),this.config.shouldUseSymbols()&&(t+=this.symbols()),new this.Str(t).shuffle().get()}generate(){const t=this.alphabet();if(!t)throw new Error("You must specify the character set when using the string builder in Str.random(builder => …)");let e=this.config.length();const n=bt.default.randomBytes(e),r=t.length-1;let s="";for(;e--;)s+=t[n[e]&r];return s}}J.RandomStringGenerator=Ct;var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.StringReplacer=void 0;class It{constructor(t,e){this.strings=t,this.searchValue=e,this.shouldReplaceAll=!1,this.shouldReplaceLast=!1}all(){return this.shouldReplaceAll=!0,this}last(){return this.shouldReplaceLast=!0,this}with(t){switch(!0){case this.shouldReplaceAll:return this.strings.replaceAll(this.searchValue,t??"");case this.shouldReplaceLast:return this.strings.replaceLast(this.searchValue,t??"");default:return this.strings.replace(this.searchValue,t??"")}}}K.StringReplacer=It,Object.defineProperty(q,"__esModule",{value:!0}),q.Str=void 0;const ge=se,Ot=Z,Rt=Y,Lt=J,ne=K;class c{constructor(t){this.value=String(t??"").slice(0)}get ALPHANUMERIC_PATTERN(){return/[A-Za-z0-9\u00C0-\u00FF]/}bomCharCode(){return 65279}get(){return this.toString()}toString(){return this.value}after(t){if(t==="")return this;const e=this.split(t);return e.length===1?this:new c(e.slice(1).join(t))}afterLast(t){return t===""?this:new c(this.split(t).pop())}append(...t){return new c(this.value+[].concat(...t).join(""))}at(t){const e=this.length();if(t<0&&(t+=e),!(t<0||t>e))return this.value[t]}before(t){return t===""?this:new c(this.split(t).shift())}beforeLast(t){if(t==="")return this;const e=this.split(t);return e.length===1?this:new c(e.slice(0,-1).join(t))}camel(){return new c(this.replaceAll(/[_-]+/," ").splitCamel().map(t=>new c(t).lower().ucFirst().get()).join("")).lcFirst()}chars(){return Array.from(this.toString())}concat(...t){return t=[].concat(...t),new c(this.value.concat(...t))}contains(...t){return this.includes(...t)}containsAll(...t){return this.includesAll(...t)}containsBom(){return this.chars().some((t,e)=>this.value.charCodeAt(e)===this.bomCharCode())}notContains(t){return!this.contains(t)}endsWith(t,e){return this.value.endsWith(t,e)}equals(t){return t instanceof c?this.value===t.get():this.value===t}equalsIgnoreCase(t){return this.lower().equals(new c(t).lower().get())}notEquals(t){return!this.equals(t)}finish(t){return this.endsWith(t)?this:this.append(t)}includes(...t){return[].concat(...t).filter(e=>e!=="").some(e=>this.value.includes(e))}includesAll(...t){return[].concat(...t).every(e=>this.includes(e))}notIncludes(t){return!this.includes(t)}isCamel(){return this.equals(this.camel())}isEmpty(){return this.length()===0}isLower(){return this.isLowercase()}isLowercase(){return this.equals(this.lower())}isLowerLetters(){return this.equals(this.lower())&&this.notEquals(this.upper())}isNotEmpty(){return!this.isEmpty()}isString(t){return typeof t=="string"&&Object.prototype.toString.call(t)==="[object String]"}isAlphaNumeric(t){return this.isString(t)&&t.length>0&&t.match(/^[A-Za-z0-9\u00C0-\u00FF]*$/)!==null}isSymbol(t){return Object.prototype.toString.call(t)==="[object Symbol]"}isUpper(){return this.isUppercase()}isUppercase(){return this.equals(this.upper())}kebab(t="-"){return new c(this.value.replace(/[_-\s]+/g,t)).strip().toLowerCase()}lcFirst(){return this.isEmpty()?this:new c(this.value[0].toLowerCase()+this.value.slice(1))}length(){return this.value.length}hasLength(t){return this.length()===t}limit(t=0,e=""){return this.length()<=t?this:new c(this.value.substring(0,t).concat(e))}lines(){return this.split(`
`)}lower(){return this.toLowerCase()}lowercase(){return this.toLowerCase()}ltrim(t=""){if(!t)return new c(this.value.trimStart());for(;this.startsWith(t);)this.value=this.slice(t.length).get();return new c(this.value)}padBoth(t=0,e=" "){return t<=this.length()?this:this.padLeft((this.length()+t)/2,e).padRight(t,e)}padLeft(t,e=" "){return new c(this.value.padStart(t,e))}padRight(t,e=" "){return new c(this.value.padEnd(t,e))}parseCallback(t="@",e){if(this.notContains(t))return[this.value,e];const[n,r]=this.split(t,2);return[n,r]}pascal(){return this.studly()}prepend(...t){return new c([].concat(...t).join("")+this.value)}random(t){const e=new Ot.RandomStringConfig,n=new Rt.RandomStringBuilder(e);return t||n.characters().numbers().symbols(),typeof t=="function"&&t(n),typeof t=="number"&&n.characters().numbers().symbols().length(t),this.generateRandom(e)}generateRandom(t){return new Lt.RandomStringGenerator(c,t).generate()}replace(t,e){return e==null?new ne.StringReplacer(this,t):new c(this.value.replace(t,e))}replaceAll(t,e){if(e==null)return new ne.StringReplacer(this,t).all();const n=new RegExp(t,"g");return new c(this.value.replace(n,e))}replaceLast(t,e){return e==null?new ne.StringReplacer(this,t).last():this.notContains(t.toString())?this:new c(this.beforeLast(t.toString()).get()+e+this.afterLast(t.toString()).get())}reverse(){return new c(this.chars().reverse().join(""))}rtrim(t=""){if(!t)return new c(this.value.trimEnd());for(;this.endsWith(t);)this.value=this.replaceLast(t).with("").get();return new c(this.value)}shuffle(){const t=this.chars();let e=t.length;for(;e;){const n=Math.floor(Math.random()*e--),r=t[e];t[e]=t[n],t[n]=r}return new c(t.join(""))}slice(t,e){return new c(this.value.slice(t,e))}slug(t="-"){return this.kebab(t)}snake(){return new c(this.value.replace(/[_-\s]+/g,"_")).strip().toLowerCase()}split(t,e){return this.value.split(t,e)}splitCamel(){return this.split(new RegExp("([^\\p{L}\\d]+|(?<=\\p{L})(?=\\d)|(?<=\\d)(?=\\p{L})|(?<=[\\p{Ll}\\d])(?=\\p{Lu})|(?<=\\p{Lu})(?=\\p{Lu}\\p{Ll})|(?<=[\\p{L}\\d])(?=\\p{Lu}\\p{Ll}))","gu")).map(t=>t.trim()).filter(t=>t.match(new RegExp(this.ALPHANUMERIC_PATTERN,"g")))}squish(){return this.stripExtraSpaces().trim()}start(t){return this.startsWith(t)?this:this.prepend(t)}startsWith(t,e){return this.value.startsWith(t,e)}startsWithBom(){return this.value.charCodeAt(0)===this.bomCharCode()}strip(){return new c(this.value.replace(/\s+/g,""))}stripBom(){return this.startsWithBom()?new c(this.slice(1)):this}stripHtml(){return this.replace(/(<([^>]+)>)/gi,"")}stripNums(){return this.replaceAll(/\d+/,"")}stripExtraSpaces(){return new c(this.value.replace(/\s+/g," "))}studly(){return this.camel().ucFirst()}substr(t,e){return new c(this.value.substring(t,e))}title(){return new c(this.split(" ").filter(t=>t).map(t=>new c(t)).map(t=>(t.isUpper()||(t=t.lower().replace(this.ALPHANUMERIC_PATTERN,e=>e.toUpperCase())),t.get())).join(" "))}toLowerCase(){return new c(this.value.toLowerCase())}toUpperCase(){return new c(this.value.toUpperCase())}trim(t=""){return this.ltrim(t).rtrim(t)}ucFirst(){return this.isEmpty()?this:new c(this.value[0].toUpperCase()+this.value.slice(1))}upper(){return this.toUpperCase()}uppercase(){return this.toUpperCase()}uuid(){return(0,ge.v4)()}isUuid(){return(0,ge.validate)(this.value)}words(){return this.splitCamel()}}q.Str=c,Object.defineProperty(U,"__esModule",{value:!0}),U.Str=void 0;const Pt=q,O=i=>new Pt.Str(i);U.Str=O,O.uuid=()=>O().uuid(),O.random=i=>O().random(i),O.isString=i=>O().isString(i),O.isAlphaNumeric=i=>O().isAlphaNumeric(i),O.isSymbol=i=>O().isSymbol(i);var St=U.default=O;const At=i=>St(i).isCamel(),xt=i=>/^([a-z0-9]{1,})(_[a-z0-9]{1,})*$/.test(i);class Q{constructor(t,e){d(this,"_id");d(this,"_type");d(this,"_subType");d(this,"_title");d(this,"_placeholder");d(this,"_required");d(this,"_value");d(this,"_logic");d(this,"_interview");d(this,"isCurrent",!1);d(this,"isEnd",!1);d(this,"exitRepeat",!1);d(this,"indexInsideRepeat",null);d(this,"isLast",!1);d(this,"isNotLastOfRepeatContent",!1);d(this,"isPrevious",!1);this._interview=e,this.id=t.id,this._type=t.type,this._subType=t.subType||"",this._title=t.title||"",this._placeholder=t.placeholder||"",this._required=t.required||!1,this._logic=t.logic||{},this.indexInsideRepeat=t.indexInsideRepeat||null}get id(){return this._id}set id(t){this.idIsNotInCamelCaseOrSnakeCase(t),this.findDuplicatedIdsInInterview(this._interview.getInterviewParams(),[t]),this._id=t}get type(){return this._type}get value(){return this._value}get required(){return this._required}get title(){return this._title}get state(){return this.getStateOfQuestion()}idIsNotInCamelCaseOrSnakeCase(t){if(!At(t)&&!xt(t))throw new R("",`ID '${t}' is not in camel case or snake case`)}findDuplicatedIdsInInterview(t,e=[]){for(const n of Object.values(t)){const r=n.id;if(e.includes(r))throw new R("","ID REPEATED: "+r);e.push(r),n.type==="repeat"&&this.findDuplicatedIdsInInterview(n.questions)}}setValue(t){this._value=t}update(){this.updateState()}updateState(){this._interview.state.setPropertyInState(this._id,this.getStateOfQuestion())}getStateOfQuestion(){return{title:this.getTitleForState(),value:this._value}}getTitleForState(){var e;const t=(e=this.indexInsideRepeat)==null?void 0:e.split(".").pop();return t?this._title.replace(/<%= index %>/g,t.toString()):this._title}getParams(){return{id:this._id,type:this._type}}canBeShown(){var t,e;if((t=this._logic)!=null&&t.showIf){const n=this._interview.map.keys(),r=this._interview.map.values();if(!Function(...n,`return ${this._logic.showIf}`).bind(this)(...r))return!1}if((e=this._logic)!=null&&e.hideIf){const n=this._interview.map.keys(),r=this._interview.map.values();if(!!Function(...n,`return ${this._logic.hideIf}`).bind(this)(...r))return!1}return!0}addOrUpdateParam(t,e){t==="required"&&(this._required=Boolean(e))}}class pe extends Q{constructor(t,e){super(t,e),this.setValue(t.value||""),this.update()}}class Et extends Q{constructor(t,e){super(t,e),this.setValue(t.value||0),this.update()}setValue(t){const e=parseFloat(t);if(isNaN(e)||t==="")throw new Error(`Value of question whith id '${this.id}' must be a number`);this._value=e}}class Qt extends Q{constructor(e,n){super(e,n);d(this,"_range");d(this,"_questions");d(this,"_content",{});this._range=e.range,this._questions=e.questions,this.setValue(e.value),this.update()}get content(){return this._content}get range(){return this._range}setValue(e){const n=parseFloat(e);if(isNaN(n)||e==="")throw new Error(`Value of question whith id '${this.id}' must be a number`);this._value=this.getValueBetweenRange(n),this._questions&&this.buildContent()}getValueBetweenRange(e){return e<this._range.min?this._range.min:e>this._range.max?this._range.max:e}buildContent(){const e=this._value;for(let s=0;s<e;s++){const u=this._content[s];if(u){u.hidden=!1;continue}this.addIndexToNestedQuestions(s);const a=new _e({interviewParams:this._questions},!1);this._content[s]={hidden:!1,nestedInterview:a}}const n=Object.keys(this._content);if(e<n.length)for(let s=e;s<n.length;s++)this._content[s].hidden=!0;Object.values(this._content).forEach((s,u)=>{s.nestedInterview.isLastContentInterviewOfRepeat=u+1===this._value})}addIndexToNestedQuestions(e){Object.values(this._questions).forEach(n=>{const r=e+1;this.indexInsideRepeat!==null?n.indexInsideRepeat=this.indexInsideRepeat+`.${r}`:n.indexInsideRepeat=r.toString()})}getParams(){return{id:this.id,type:this.type,questions:this._questions}}updateState(){this._interview.state.setPropertyInState(this.id,{title:this.title,value:this._value,content:this.getContentForState()})}getContentForState(){const e={};for(const[n,r]of Object.entries(this._content))e[n]={hidden:r.hidden,state:r.nestedInterview.getState()};return e}}class Mt extends Q{constructor(e,n){super(e,n);d(this,"_format");this._format=e.format||"dd/mm/yyyy",this.setValue(e.value||"")}}class Ut extends Q{constructor(e,n){super(e,n);d(this,"_choices",[]);d(this,"_values",[]);this.setChoices(e.choices),e.value&&this.setValue(e.value),this.update()}get choices(){return this._choices}get values(){return this._values}setChoices(e=[]){var n;if(!Array.isArray(e))throw new Error(`Choices value of question whith id '${this.id}' must be an Array`);this._choices=e,this._subType==="multiSelect"?this._choices.forEach(r=>{const s=this._values.includes(r.label);r.checked&&!s&&this._values.push(r.label),r.checked=s||r.checked}):this._value=((n=this._choices.find(r=>r.checked===!0))==null?void 0:n.label)||""}setValue(e){this.choiceWithValueExists(e),this._subType==="multiSelect"?this.setMultiSelectValue(e):(this._choices.forEach(n=>{n.checked=n.label===e}),this._value=e)}choiceWithValueExists(e){if(!this._choices.find(r=>r.label===e))throw new Error(`Question with id: ${this.id}, does not have choice with value: ${e}`)}setMultiSelectValue(e){if(Array.isArray(e))this._values=e,this._choices.forEach(n=>{n.checked=e.includes(n.label)});else{const n=this._choices.find(r=>r.label===e);if(!n)throw new Error("Value does not exists");if(!this._values.includes(e)&&e)this._values.push(e),this._choices.forEach(r=>{r.checked=this._values.includes(r.label)});else{const r=this._values.indexOf(n.label);r!==-1&&this._values.splice(r,1),n.checked=!1}}}addChoice(e){this._choices.push(e)}removeChoice(e){if(typeof e=="number"){this._choices.splice(e,1);return}const n=typeof e=="string"?e:e.label,r=this._choices.findIndex(s=>s.label===n);if(r===-1)throw new Error(`Choice with label: '${n}', does not exist in Question with id: '${this.id}'`);this._choices.splice(r,1)}changeLabelOfChoice(e,n){if(!this._choices[e])throw new Error("No choice with index:"+e);this._choices[e].label=n}addOrUpdateParam(e,n){super.addOrUpdateParam(e,n)}}const qt={createQuetion(i,t){const{type:e}=i;let n;return e==="text"?n=new pe(i,t):e==="number"?n=new Et(i,t):e==="date"?n=new Mt(i,t):e==="multipleChoice"?n=new Ut(i,t):e==="repeat"?n=new Qt(i,t):n=new pe(i,t),n}};class $t{constructor(){d(this,"observers",[])}attach(t){this.observers.includes(t)||this.observers.push(t)}detach(t){const e=this.observers.indexOf(t);e!==-1&&this.observers.splice(e,1)}notify(){for(const t of this.observers)t.update(this)}updateInterview(){this.notify()}}class Nt{constructor(){d(this,"_state",{})}get(){return this._state}setPropertyInState(t,e){this._state[t]=e}}class Bt extends $t{constructor(e){super();d(this,"map",new Map);d(this,"state");this.state=new Nt,this.validateParams(e),this.setInitialParams(e)}validateParams(e){if(e==null)throw new R("nullOrUndefined")}getInterviewParams(){const e={};for(const[n,r]of this.map)e[n]=r.getParams();return e}setInitialParams(e){for(const n of Object.values(e))this.addQuestion(n)}addQuestion(e){const n=qt.createQuetion(e,this);this.map.set(n.id,n),this.attach(n)}removeQuestion(e){const n=this.getQuestionById(e);this.map.delete(e),this.detach(n)}getQuestionById(e){return this.idExists(e),this.map.get(e)}setValueOfQuestion(e,n){this.idExists(e);const r=this.map.get(e);r==null||r.setValue(n),this.notify()}idExists(e){if(!this.map.has(e))throw new Error("No question with id: "+e)}changeIdOfQuestion(e,n){const r=this.getQuestionById(e);r.id=n,this.map.set(n,r),this.map.delete(e)}addChoiceToMultipleChoiceQuestion(e,n){this.getMultipleChoiceQuestionById(e).addChoice(n)}getMultipleChoiceQuestionById(e){const n=this.getQuestionById(e);if(n.type!=="multipleChoice")throw new Error(`Question with id: ${e}, is not of type 'multipleChoice'`);return n}removeChoiceFromMultipleChoice(e,n){this.getMultipleChoiceQuestionById(e).removeChoice(n)}changeLabelOfChoice(e,n,r){this.getMultipleChoiceQuestionById(e).changeLabelOfChoice(n,r)}addOrUpdateParamOfQuestion(e,n){this.getQuestionById(e).addOrUpdateParam(n==null?void 0:n.name,n==null?void 0:n.value)}getAsArray(){return Array.from(this.map)}getState(){return this.state.get()}}const M=(i,t)=>{var s;let e,n;const r=i.getAsArray();for(let u=0;u<r.length;u++){const a=r[u][1],o=a==null?void 0:a.isCurrent,f=(a==null?void 0:a.type)==="repeat";if(n=r[u+1]&&r[u+1][1],o&&!f&&!n&&!t){if(a.canBeShown()){a.isEnd=!0,e=a;break}a.isCurrent=!1;for(let l=0;l<r.length;l++){const h=r[l][1];if(h.exitRepeat){e=h;break}}}if(o&&!f&&n){a.isCurrent=!1,e=r[u+1][1],e.isCurrent=!0,e.canBeShown()||(e=M(i,t));break}if(o&&f&&a.canBeShown()){const l=a;l.isCurrent=!1,e=l.content[0].nestedInterview.getInterviewAsArray()[0][1],e.isCurrent=!0;break}if(o&&f&&!a.canBeShown()&&n){a.isCurrent=!1,e=r[u+1][1],e.isCurrent=!0,e.canBeShown()||(e=M(i,t));break}if(o&&f&&!a.canBeShown()&&!n){a.isEnd=!0,e=a;break}if(!o&&f&&!a.canBeShown()&&!n){a.isEnd=!0,e=a;break}if(!o&&f&&a.canBeShown()){let l=!1;const h=a;for(let v=0;v<h.value;v++)if(!h.content[v].hidden){const g=!h.content[v+1]||((s=h.content[v+1])==null?void 0:s.hidden);if(e=h.content[v].nestedInterview.getNextQuestion(),e){if(h.content[v].nestedInterview.isQuestionTheLastOfInterview(e.id))if(g&&n){const w=e;if(w.exitRepeat){w.isEnd=!1,w.isCurrent=!1,e=r[u+1][1],e.isCurrent=!0,e.canBeShown()||(e=M(i,t)),w.exitRepeat=!1;break}else w.exitRepeat=!0}else g||(e.isLast=!0);if(e!=null&&e.isEnd)if(v+1<parseInt(a.value))if(!e.isCurrent)e.isEnd=!1,e=null;else{const w=h.content[v+1].nestedInterview.getInterviewAsArray();e.isCurrent=!1,e.isEnd=!1,e=w[0][1],e.isCurrent=!0}else{const w=e.canBeShown();e.isEnd&&!w&&(e.isCurrent=!1,e=null)}if(e)break}else if(g&&n)l=!0;else if(!g&&!e){const x=h.content[v].nestedInterview.getInterviewAsArray().find(w=>w[1].isLast);if(x){x[1].isLast=!1;const w=h.content[v+1].nestedInterview.getInterviewAsArray();if(!w[0][1].isCurrent){w[0][1].isCurrent=!0,e=w[0][1];break}}}}if(l)continue;break}}return e},kt=(i,t,e=null,n=!1,r)=>{const s=i.getAsArray(),u=s[0][1];if(u.isCurrent)return t?u:(e&&(e.isCurrent=!0),u.isCurrent=!1,e);let a=u,o;for(let f=0;f<s.length;f++){const l=s[f][1],h=l.canBeShown();if(l.exitRepeat&&(l.exitRepeat=!1),l.isLast&&(l.isLast=!1),l.isNotLastOfRepeatContent&&(l.isNotLastOfRepeatContent=!1),l.isCurrent){a.isCurrent=!0,o=a,l.isCurrent=!1;break}else if(h&&(a=l),l.type==="repeat"){const v=l;for(let g=0;g<parseInt(l.value)&&!(!v.content[g].hidden&&(o=v.content[g].nestedInterview.getPreviousQuestion(a),o!=null&&o.isPrevious&&(o.isPrevious=!1,a=o,o=null),o&&o.isCurrent));g++);if(o&&o.isCurrent)break}}if(e&&!o){const f=we(s);f&&(o=f)}return o&&!t&&r(o.id,i)&&(n?(o.isLast=!0,o.exitRepeat=!0):o.isNotLastOfRepeatContent=!0),o&&t&&o.indexInsideRepeat&&o.isNotLastOfRepeatContent&&(o.isLast=!0),o},we=i=>{let t;for(let e=i.length-1;e>=0;e--){const n=i[e][1];if(n.canBeShown())if(n.type==="repeat"){const s=n;for(let u=parseInt(n.value)-1;u>=0;u--)if(!s.content[u].hidden){const a=s.content[u].nestedInterview.getInterviewAsArray();if(t=we(a),t&&(t.isPrevious=!0),t)break}if(t)break}else{t=n,t.isPrevious=!0;break}}return t};class Tt{constructor(t,e){d(this,"_interview");d(this,"_isRoot");d(this,"_currentQuestion");this._isRoot=e,this._interview=t,e&&this.getCurrent()}next(){const t=M(this._interview,this._isRoot);t?this.setCurrent(t):this.getCurrent().isCurrent=!0,this.getCurrent().isEnd=!1}getNextQuestion(){return M(this._interview,this._isRoot)}previous(){const t=this.getPreviousQuestion();t&&this.setCurrent(t)}getPreviousQuestion(t=null,e=!1){return kt(this._interview,this._isRoot,t,e,this.isQuestionTheLastOfInterview.bind(this))}setCurrent(t){this._currentQuestion=t}getCurrent(){return this._currentQuestion||(this._currentQuestion=this._interview.getAsArray()[0][1],this._isRoot&&(this._currentQuestion.isCurrent=!0)),this._currentQuestion}isQuestionTheLastOfInterview(t){const e=this.getLastQuestionOfInterview(),n=this._interview.map.get(t);return(n==null?void 0:n.indexInsideRepeat)!==null?(n==null?void 0:n.id)===(e==null?void 0:e.id)&&(n==null?void 0:n.indexInsideRepeat)===(e==null?void 0:e.indexInsideRepeat):(e==null?void 0:e.id)===n.id}getLastQuestionOfInterview(){let t=null;const e=this._interview.getAsArray();for(let n=e.length-1;n>=0;n--){const r=e[n][1];if(r.canBeShown())if(r.type==="repeat"){const s=r;for(let u=parseInt(r.value)-1;u>=0&&!(!s.content[u].hidden&&(t=s.content[u].nestedInterview.getLastQuestionOfInterview(),t));u--);t||(t=r);break}else{t=r;break}}return t}getProgress(){let t=0,e=0;return this._interview.getAsArray().forEach(([r,s])=>{t+=1,s.isCurrent&&(e=t),s.type==="repeat"&&Object.values(s.content).forEach(a=>{if(!a.hidden){const o=a.nestedInterview.getProgress();o.currentPosition!==0&&(e=t+o.currentPosition),t+=o.total}})}),{total:t,currentPosition:e,percentageOfCompletion:Math.round(e*100/t)}}isStartOfInterview(){const e=this._interview.getAsArray()[0][1].id,n=this.getCurrent().id;return e===n}isEndOfInterview(){const t=this.getLastQuestionOfInterview(),e=this.getCurrent();return e.indexInsideRepeat!==null?e.id===(t==null?void 0:t.id)&&e.indexInsideRepeat===t.indexInsideRepeat:(t==null?void 0:t.id)===e.id}}class _e{constructor(t={interviewParams:{}},e=!0){d(this,"_interview");d(this,"_isRoot");d(this,"navigation");d(this,"isLastContentInterviewOfRepeat",!1);this._interview=new Bt(t.interviewParams),this._isRoot=e,this.navigation=new Tt(this._interview,this._isRoot)}get interview(){return this._interview}setValue(t,e){this._interview.setValueOfQuestion(t,e)}getCurrent(){return this.navigation.getCurrent()}next(){this.navigation.next()}getNextQuestion(){return this.navigation.getNextQuestion()}previous(){this.navigation.previous()}getPreviousQuestion(t=null){return this.navigation.getPreviousQuestion(t,this.isLastContentInterviewOfRepeat)}getLastQuestionOfInterview(){return this.navigation.getLastQuestionOfInterview()}isQuestionTheLastOfInterview(t){return this.navigation.isQuestionTheLastOfInterview(t)}getProgress(){return this.navigation.getProgress()}isStart(){return this.navigation.isStartOfInterview()}isEnd(){return this.navigation.isEndOfInterview()}getInterviewAsArray(){return this._interview.getAsArray()}getInterviewParams(){return this._interview.getInterviewParams()}getNestedInterview(t,e){const n=this._interview.getQuestionById(t);if((n==null?void 0:n.type)!=="repeat")throw new Error("Question with id "+t+" is not a repeat question");return n.content[e].nestedInterview}getCurrentGuidedInterview(){const t=this.getInterviewAsArray();let e=null;for(let n=0;n<t.length;n++){const r=t[n][1];if(r.isCurrent){e=this;break}if(r.type==="repeat"){const s=r;for(let u=0;u<parseInt(r.value)&&!(!s.content[u].hidden&&(e=s.content[u].nestedInterview.getCurrentGuidedInterview(),e));u++);}if(e)break}return this._isRoot&&!e&&(e=this),e}changeIdOfQuestion(t,e){this._interview.changeIdOfQuestion(t,e)}findQuestionById(t){return this._interview.getQuestionById(t)}addChoiceToMultipleChoiceQuestion(t,e){this._interview.addChoiceToMultipleChoiceQuestion(t,e)}removeChoiceFromMultipleChoice(t,e){this._interview.removeChoiceFromMultipleChoice(t,e)}changeLabelOfChoice(t,e,n){this._interview.changeLabelOfChoice(t,e,n)}addOrUpdateParamOfQuestion(t,e){this._interview.addOrUpdateParamOfQuestion(t,e)}getState(){return this._interview.getState()}}I.GuidedInterview=_e,Object.defineProperty(I,Symbol.toStringTag,{value:"Module"})});
